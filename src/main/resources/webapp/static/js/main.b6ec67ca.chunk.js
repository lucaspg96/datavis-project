(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{117:function(e,t,a){e.exports=a(196)},122:function(e,t,a){},123:function(e,t,a){},125:function(e,t,a){},131:function(e,t,a){},139:function(e,t){},140:function(e,t,a){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),o=a.n(r),l=(a(122),a(123),a(18)),i=a(98),s=a.n(i),u=a(202),m=a(45),d=a.n(m),f="ws://"+window.location.host,b=(a(125),d.a.divIcon({className:"css-icon",html:'<div class="tweet-map-marker"></div>'}));function p(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){null==a&&r(d.a.map("map",{center:[0,0],zoom:2,layers:[d.a.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})]}))})),Object(n.useEffect)((function(){null!=a&&(new WebSocket(f+"/tweets?geolocated=true").onmessage=function(e){!function(e){d.a.marker([e.lat,e.lng],{icon:b}).addTo(a).bindPopup(function(e){return s.a.renderToString(c.a.createElement(u.a,{author:e.userName,content:c.a.createElement("p",null,e.text),datetime:e.date}))}(e))}(JSON.parse(e.data))})}),[a]),c.a.createElement("div",{id:"map"})}var v=a(205),w=(a(130),a(131),a(112)),O=a(204),h=a(110),E=(a(140),a(102)),g=a.n(E),j=a(206),S=a(209),y=a(203),N=a(207),k=a(208),T=j.a.Search,W={colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b"],enableTooltip:!0,deterministic:!0,fontFamily:"impact",fontSizes:[5,60],fontStyle:"normal",fontWeight:"normal",padding:1,rotations:3,rotationAngles:[0,90],scale:"sqrt",spiral:"archimedean",transitionDuration:1e3};function z(){var e=Object(n.useRef)({}),t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(),b=Object(l.a)(d,2),p=b[0],v=b[1],E=Object(n.useState)(0),j=Object(l.a)(E,2),z=j[0],C=j[1],x=Object(n.useState)(50),D=Object(l.a)(x,2),F=D[0],J=D[1],A=Object(n.useState)(!1),B=Object(l.a)(A,2),I=B[0],P=B[1],q=Object(n.useState)(!1),M=Object(l.a)(q,2),R=M[0],V=M[1],K=Object(n.useState)((new Date).getTime()+5e3),L=Object(l.a)(K,2),U=L[0],$=L[1];function _(){if(0!==e.current.length){for(var t=Object.entries(e.current).map((function(e){var t=Object(l.a)(e,2);return{text:t[0],value:t[1]}})).sort((function(e,t){return t.value-e.value})).splice(0,F),a=0;a<z;a++)t.shift();var n=function(e){if(0===e.length||!I)return e;var t=e.map((function(e){return e.value})),a=Object(O.a)(t),n=Object(O.b)(t);return e.map((function(e){return Object(w.a)({},e,{value:(e.value+a)/n})}))}(t);o(n),$((new Date).getTime()+5e3)}}return Object(n.useEffect)((function(){!function(){u&&u.close(3e3);o([]),V(!0),e.current={};var t=p?new WebSocket(f+"/tweets?search="+encodeURIComponent(p)):new WebSocket(f+"/tweets");t.onmessage=function(t){var a=JSON.parse(t.data);Object.entries(a.words).forEach((function(t){var a=Object(l.a)(t,2),n=a[0],c=a[1];e.current[n]=(e.current[n]||0)+c}))},t.onclose=function(){console.log("closing websocket")},m(t),$((new Date).getTime()+5e3),setTimeout((function(){0===Object.keys(e.current).length&&S.a.warning("Nenhum twitter encontrado at\xe9 o momento"),V(!1)}),5e3)}()}),[p]),Object(n.useEffect)((function(){_()}),[z,F,I]),c.a.createElement("div",{className:"word-cloud-container"},c.a.createElement(y.a,{spinning:R},c.a.createElement("div",{className:"word-cloud-fields"},c.a.createElement("div",{className:"word-cloud-field"},c.a.createElement(T,{placeholder:"Filtrar tweets",enterButton:"Filtrar!",size:"small",onSearch:v})),c.a.createElement("div",{className:"word-cloud-field"},c.a.createElement("span",null,"N\xfamero de palavras: "),c.a.createElement(N.a,{defaultValue:F,onChange:J})),c.a.createElement("div",{className:"word-cloud-field"},c.a.createElement("span",null,"Pular palavras: "),c.a.createElement(N.a,{defaultValue:z,onChange:C})),c.a.createElement("div",{className:"word-cloud-field"},c.a.createElement(k.a,{onChange:P}," Normalizar Frequ\xeancias ")))),c.a.createElement(g.a,{className:"count-down-refresh",target:U,onEnd:_}),0!==r.length&&c.a.createElement(h.a,{words:r,options:W}))}var C=v.a.TabPane;function x(){return c.a.createElement(v.a,{defaultActiveKey:"1",type:"card"},c.a.createElement(C,{tab:"Mapa",key:"1"},c.a.createElement(p,null)),c.a.createElement(C,{tab:"Contagem",key:"2"},c.a.createElement(z,null)))}var D=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[117,1,2]]]);
//# sourceMappingURL=main.b6ec67ca.chunk.js.map