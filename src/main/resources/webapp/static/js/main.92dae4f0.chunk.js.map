{"version":3,"sources":["services/index.js","services/SocketController.jsx","map/MapController.jsx","components/RealTimeContainer/TweetsStatistics.jsx","components/RealTimeContainer/TrendsContainer.jsx","components/RealTimeContainer/RealTimeContainer.jsx","services/TwitterService.js","components/Statics/StaticMainContainer.jsx","components/MainContainer.jsx","App.js","serviceWorker.js","index.js"],"names":["host","window","location","websocketURL","apiURL","sockets","listenners","addListenner","key","listenner","addSocket","keyword","color","ws","WebSocket","encodeURIComponent","onmessage","message","tweet","JSON","parse","data","newData","date","Date","Object","entries","forEach","f","map","dataWithoutPosition","legend","undefined","markersLayer","createMap","containerId","remove","L","center","zoom","layers","tileLayer","attribution","clearMarkers","clearLayers","createMarker","layerGroup","addTo","marker","position","icon","divIcon","className","html","bindPopup","content","author","userName","text","datetime","toLocaleTimeString","ReactDOMServer","renderToString","createPopup","addMarker","duration","staticMap","setTimeout","updateLegend","d3","control","onAdd","div","DomUtil","create","innerHTML","TweetsStatistics","statistics","selectable","onClick","selected","users","retweets","mediaAndLinks","total","mentions","replies","geolocated","originals","gutter","title","trigger","onVisibleChange","console","log","span","value","_","includes","TrendsContainer","disabled","useState","trends","setTrends","useEffect","axios","get","then","res","trend","Search","Input","RealTimeContainer","onBack","setStatistics","targetTime","setTargetTime","seriesChart","setSeriesChart","metrics","useRef","Set","barChart","setBarChart","search","setSearch","colors","takenColors","setTakenColors","keyColor","count","filter","c","current","SocketController","getTime","handleRemove","tag","close","drawSeriesChart","chartData","isEmpty","now","length","cleanData","d","crossfilter","dimension","group","reduceSum","all","sort","a","b","getSeriesData","changeData","chart","Chart","container","autoFit","height","renderer","line","k","label","tooltip","showCrosshairs","shared","axis","animateOption","update","easing","render","drawBarChart","annotation","clear","coordinate","transpose","interval","animate","appear","push","MapController","retweet","reply","mediasAndLink","add","original","keys","splice","subTitle","enterButton","placeholder","onSearch","onChange","e","target","closable","onClose","bordered","id","onEnd","size","API_URL","service","baseURL","href","Option","Select","wordsColors","formatFunctions","minutes","seconds","hour","day","identity","x","StaticMainContainer","setData","offline","setOffline","selectedKeys","setSelectedKeys","selectedTypes","setSelectedTypes","dateInterval","setDateInterval","dateFilter","t","wordChart","pieChart","setPieChart","filteredData","type","coloredKeys","setColors","dateFormater","setDateFormater","dateFormatSelect","defaultValue","warningTooltip","clearZoomButton","facts","setFacts","processData","parseInt","$numberLong","i","addColorToData","drawWordChart","dv","wc","wordCount","word","slice","getWordCount","DataSet","View","source","range","min","max","transform","spiral","fields","font","padding","timeInterval","Infinity","rotate","random","Math","fontSize","configWorldCloud","colorRange","domain","quantileSeq","rows","destroy","scale","nice","y","showTitle","showMarkers","reflect","point","v","shape","keyDimension","keyCountGroup","visibleKeys","keyScale","dc","width","xUnits","ordinal","margins","top","right","bottom","left","colorAccessor","gap","renderHorizontalGridLines","renderlet","selectAll","n","charsByKey","on","xAxis","ticks","timeDimension","timeCountGroup","minDate","maxDate","timeScale","dateSeriesChart","brushOn","yAxisLabel","xAxisLabel","clipPadding","elasticY","mouseZoomable","ordering","seriesAccessor","keyAccessor","valueAccessor","itemHeight","autoItemWidth","horizontal","drawSunburst","typesDimension","typesCountGroup","colorScale","innerRadius","addMarkers","TwitterService","catch","factsData","draw","newFacts","registerShape","cfg","attrs","defaultStyle","style","textAlign","fontFamily","fill","stroke","textBaseline","getTextAttrs","textShape","addShape","Util","PI","backIcon","extra","Tabs","TabPane","MainContainer","setVisible","view","setView","visible","placement","App","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.92dae4f0.chunk.js","sourcesContent":["const host = window.location.host\n\nconst websocketURL = \"ws://\" + host;\n// const websocketURL = \"ws://localhost:9000\";\n\n// const apiURL = \"http://localhost:9000\";\nconst apiURL = host\n\nexport { apiURL, websocketURL }","import { websocketURL } from './index';\n\nconst sockets = {}\nconst listenners = {}\n\nexport function addListenner(key, listenner) {\n    listenners[key] = listenner;\n}\n\nexport function addSocket({ keyword, color }) {\n\n    const ws =\n        new WebSocket(websocketURL + '/tweets?keywords=' + encodeURIComponent(keyword))\n\n    sockets[keyword] = ws\n\n    ws.onmessage = (message) => {\n        const tweet = JSON.parse(message.data);\n        const newData = { ...tweet, date: new Date(tweet.date), key: keyword, color }\n        Object.entries(listenners).forEach(([_, f]) => f(newData))\n\n    }\n\n}\n\nexport function removeSocket(keyword) {\n    const ws = sockets[keyword];\n    ws.close(3000);\n    delete sockets[keyword];\n}","import { Comment } from 'antd';\nimport L from 'leaflet';\nimport ReactDOMServer from 'react-dom/server'\nimport React from 'react';\nimport * as d3 from 'd3';\n\nvar map = null;\nvar dataWithoutPosition = 0;\nvar legend = undefined;\nvar markersLayer = undefined\n\nexport function createMap(containerId) {\n    if (map) {\n        markersLayer = undefined\n        dataWithoutPosition = 0\n        map.remove()\n        legend = undefined\n    }\n    map = L.map(containerId, {\n        center: [0, 0],\n        zoom: 1,\n        layers: [\n            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n                attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            }),\n        ]\n    })\n\n}\n\nexport function getMap() {\n    return map;\n}\n\nexport function getMarkersLayer() {\n    return markersLayer;\n}\n\nfunction createPopup(tweet) {\n\n    const content = <Comment\n        author={tweet.userName}\n        content={\n            <p>\n                {tweet.text}\n            </p>\n        }\n        datetime={tweet.date.toLocaleTimeString()}\n    ></Comment>\n    return ReactDOMServer.renderToString(\n        content\n    );\n}\n\nexport function clearMarkers() {\n    if (markersLayer) markersLayer.clearLayers()\n    dataWithoutPosition = 0;\n}\n\nexport function createMarker(tweet) {\n\n    if (!markersLayer) {\n        markersLayer = L.layerGroup().addTo(map)\n    }\n\n    const marker = L.marker(tweet.position, {\n        icon: L.divIcon({\n            className: 'css-icon',\n            html: `<div class=\"tweet-map-marker\"\n            style=\"background-color:${tweet.color}\"></div>`\n        })\n    })\n        .bindPopup(createPopup(tweet))\n\n    // marker.id = tweet.id\n    // console.log(marker)\n\n    return marker\n\n}\n\nexport function addMarker(tweet, duration = 20000, staticMap = false) {\n\n    if (!markersLayer) {\n        markersLayer = L.layerGroup().addTo(map)\n    }\n\n    if (tweet.position) {\n        const marker = createMarker(tweet)\n\n        marker.addTo(markersLayer)\n\n        if (!staticMap) {\n            setTimeout(() => {\n                marker.remove()\n            }, duration)\n        }\n    }\n    else {\n        dataWithoutPosition += 1\n        updateLegend()\n    }\n}\n\nfunction updateLegend() {\n    const text = (dataWithoutPosition > 1) ? `${dataWithoutPosition} tweets sem localização` : `${dataWithoutPosition} tweet sem localização`;\n    if (legend) {\n        if (dataWithoutPosition === 0) legend.remove()\n        else d3.select(\".map-legend\")\n            .text(text)\n    }\n    else {\n        legend = L.control({ position: 'bottomright' });\n        legend.onAdd = map => {\n            const div = L.DomUtil.create(\"div\", \"map-legend\")\n            div.innerHTML += text\n\n            return div\n        }\n\n        legend.addTo(map)\n    }\n}","import React from 'react';\nimport { Statistic, Row, Col, Tooltip, Divider } from 'antd';\nimport './TweetsStatistics.scss';\n\nconst columnSpan = 3\n\nexport default function TweetsStatistics({ statistics,\n  selectable = false,\n  onClick = () => false,\n  selected = []\n}) {\n\n  const { users = 0,\n    retweets = 0,\n    mediaAndLinks = 0,\n    total = 0,\n    mentions = 0,\n    replies = 0,\n    geolocated = 0,\n    originals = 0\n  } = statistics\n\n  return <div className=\"tweets-statistics-container\">\n    <Row gutter={[8, 16]}>\n\n      <Tooltip title=\"Total de tweets\" trigger=\"hover\" onVisibleChange={console.log}>\n        <Col span={columnSpan}>\n          <Statistic title=\"Total\" value={total} />\n        </Col>\n      </Tooltip>\n\n      <Tooltip title=\"Total de tweets com localização\">\n        <Col span={columnSpan}>\n          <Statistic title=\"Geolocalizados\" value={geolocated} />\n        </Col>\n      </Tooltip>\n\n      <Tooltip title=\"Número de usuários distintos twittando\">\n        <Col span={columnSpan}>\n          <Statistic title=\"Usuários\" value={users} />\n        </Col>\n      </Tooltip>\n\n      <Tooltip title=\"Quantidade de mídia e links compartilhadas\">\n        <Col span={columnSpan}>\n          <Statistic title=\"Mídia e Links\" value={mediaAndLinks} />\n        </Col>\n      </Tooltip >\n\n      <Tooltip title=\"Quantidade de menções realizadas\">\n        <Col span={columnSpan}>\n          <Statistic title=\"Menções\" value={mentions} />\n        </Col>\n      </Tooltip >\n\n      <Tooltip title=\"Total de retweets\">\n        <Col span={columnSpan} >\n          <div onClick={_ => onClick(\"retweet\")}>\n            <Statistic className={`retweets ${selectable ? \"selectable\" : \"\"} ${selected.includes(\"retweet\") ? \"selected\" : \"\"}`} title=\"Retweets\" value={retweets} />\n          </div>\n        </Col>\n      </Tooltip >\n\n      <Tooltip title=\"Total de respostas\">\n        <Col span={columnSpan}>\n          <div onClick={_ => onClick(\"reply\")}>\n            <Statistic className={`${selectable ? \"selectable\" : \"\"} ${selected.includes(\"reply\") ? \"selected\" : \"\"}`} title=\"Respostas\" value={replies} />\n          </div>\n        </Col>\n      </Tooltip >\n\n      <Tooltip title=\"Total de tweets que não são retweets ou respostas\">\n        <Col span={columnSpan}>\n          <div onClick={_ => onClick(\"original\")}>\n            <Statistic className={`${selectable ? \"selectable\" : \"\"} ${selected.includes(\"original\") ? \"selected\" : \"\"}`} title=\"Originais\" value={originals} />\n          </div>\n        </Col>\n      </Tooltip >\n\n\n    </Row >\n\n\n  </div >\n\n}","import React from 'react'\nimport './TrendsContainer.scss'\nimport axios from \"axios\"\nimport { useState } from 'react'\nimport { apiURL } from '../../services'\nimport { useEffect } from 'react'\nimport { Tag } from 'antd'\n\nexport default function TrendsContainer({ onClick, disabled }) {\n\n  const [trends, setTrends] = useState([])\n\n  function reloadTrends() {\n    axios.get(apiURL + \"/trends\", {\n      // headers: {\n      //   crossdomain: true,\n      //   Host: \"x\"\n      // }\n    })\n      .then(res => setTrends(res.data))\n  }\n\n  useEffect(() => {\n    reloadTrends()\n  }, [])\n\n  return <>\n    {!disabled && <>\n      <h3>Selecione um tema:</h3>\n\n      <div className=\"trends\">\n        {Object.entries(trends).map(([trend, value]) => <Tag onClick={_ => onClick(trend)} key={trend}>{`${trend} (${value})`}</Tag>)}\n      </div>\n    </>\n    }\n\n  </>\n\n}","import React from 'react';\nimport './RealTimeContainer.scss'\nimport { useRef } from 'react';\nimport crossfilter from 'crossfilter';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { Input, Spin, Tag, PageHeader, Row, Col, Card } from 'antd';\nimport { Chart } from '@antv/g2';\nimport { isEmpty, sum } from 'rambda';\nimport * as SocketController from '../../services/SocketController';\nimport * as MapController from '../../map/MapController';\nimport CountDown from 'ant-design-pro/lib/CountDown';\nimport TweetsStatistics from './TweetsStatistics';\nimport TrendsContainer from './TrendsContainer';\n\nconst { Search } = Input;\n\nconst graphRefreshTimeout = 1500\nconst timeWindowSize = 0.5 * 60 * 1000\n\nexport default function RealTimeContainer({ onBack }) {\n\n    const [statistics, setStatistics] = useState({});\n    const [targetTime, setTargetTime] = useState();\n\n    const [seriesChart, setSeriesChart] = useState();\n\n    const metrics = useRef({ users: new Set() })\n\n    const [barChart, setBarChart] = useState();\n\n    const [search, setSearch] = useState(\"\");\n\n    const colors = [\n        \"#1F77B4\",\n        \"#278944\"\n        // \"#FF7F0E\",\n        // \"#2CA02C\",\n        // \"#9467BD\",\n        // \"#E377C2\",\n    ];\n\n    const [takenColors, setTakenColors] = useState([]);\n    const keyColor = useRef([]);\n\n    const data = useRef([])\n    const count = useRef({})\n\n    function addSocket(keyword = \"\") {\n        setSearch(\"\")\n        console.log(\"socket:\", keyword)\n        const color = colors.filter(c => !takenColors.map(c => c[1]).includes(c))[0]\n        count.current[keyword] = { value: 0, color };\n        setTakenColors([...takenColors, [keyword, color]])\n        SocketController.addSocket({ keyword, color })\n        setTargetTime(new Date().getTime() + graphRefreshTimeout)\n    }\n\n    function updateAll() {\n        drawSeriesChart()\n        drawBarChart()\n        setStatistics({\n            users: metrics.current.users.size,\n            retweets: (metrics.current.retweets || 0),\n            mediaAndLinks: metrics.current.mediasAndLink,\n            total: metrics.current.total,\n            mentions: metrics.current.mentions,\n            geolocated: metrics.current.geolocated,\n            replies: metrics.current.replies,\n            originals: metrics.current.original\n        })\n\n        setTargetTime(new Date().getTime() + graphRefreshTimeout)\n    }\n\n    useEffect(() => {\n        // series chart listener to collect all tweets\n\n        SocketController.addListenner(\"time\", ({ color, key, date }) => {\n            count.current[key].value += 1;\n            data.current.push({ color, key, date });\n        });\n\n        SocketController.addListenner(\"map\", tweet => {\n            if (tweet.position) console.log(tweet)\n            MapController.addMarker(tweet);\n        });\n\n        SocketController.addListenner(\"metrics\", ({ userName, retweet, reply, mediasAndLink, mentions, position }) => {\n            metrics.current.users.add(userName)\n            if (retweet) metrics.current.retweets = (metrics.current.retweets || 0) + 1\n            else if (reply) metrics.current.replies = (metrics.current.replies || 0) + 1\n            else metrics.current.original = (metrics.current.original || 0) + 1\n            if (position) metrics.current.geolocated = (metrics.current.geolocated || 0) + 1\n            metrics.current.mediasAndLink = (metrics.current.mediasAndLink || 0) + mediasAndLink\n            metrics.current.total = (metrics.current.total || 0) + 1\n            metrics.current.mentions = (metrics.current.mentions || 0) + mentions\n\n        })\n\n        MapController.createMap(\"map\");\n        drawSeriesChart();\n        drawBarChart();\n    }, [])\n\n    useEffect(() => {\n        Object.keys(metrics.current).forEach(k => metrics.current[k] = 0)\n        metrics.current.users = new Set();\n        data.current.splice(0, data.current.length)\n        Object.keys(count.current).forEach(k => count.current[k].key = 0)\n        MapController.clearMarkers();\n        keyColor.current = takenColors\n    }, [takenColors])\n\n    function getSeriesData() {\n        if (isEmpty(data.current)) {\n            return []\n        }\n\n        const now = data.current[data.current.length - 1].date.getTime() - 1000\n        const cleanData = data.current.filter(d => d.date.getTime() < now &&\n            now - d.date.getTime() < timeWindowSize)\n        const facts = crossfilter(cleanData)\n        const dimension = facts.dimension(d => [d.key, d.date, d.color])\n        const group = dimension.group().reduceSum(_ => 1)\n\n        const seriesData = group.all()\n            .sort((a, b) => a.key[1] < b.key[1])\n            .map(d => ({ keyword: d.key[0], date: d.key[1].toLocaleTimeString(), color: d.key[2], value: d.value }))\n\n        // console.log(seriesData)\n\n        return seriesData\n    }\n\n    function handleRemove(tag) {\n        SocketController.removeSocket(tag)\n        delete count.current[tag]\n        // if (takenColors.length === 1) seriesChart.destroy();\n        setTakenColors(takenColors.filter(c => c[0] !== tag))\n    }\n\n    function drawSeriesChart() {\n        const chartData = getSeriesData()\n        if (isEmpty(chartData))\n            return;\n\n        if (seriesChart) {\n            seriesChart.changeData(chartData)\n            return;\n        }\n\n        const chart = new Chart({\n            container: 'series',\n            autoFit: true,\n            height: 200,\n            renderer: 'svg'\n        })\n\n        chart.data(chartData)\n\n        chart\n            .line()\n            .position('date*value')\n            .color('keyword', k => {\n                return keyColor.current.filter(c => c[0] === k)[0][1]\n            })\n            .label(false)\n\n        chart.tooltip({\n            showCrosshairs: true,\n            shared: true,\n        });\n\n        chart.axis('date', {\n            animateOption: {\n                update: {\n                    duration: 1000,\n                    easing: 'easeLinear'\n                }\n            }\n        });\n\n        chart.render()\n        setSeriesChart(chart)\n    }\n\n    function getBarData() {\n        return Object.entries(count.current)\n            .map(([key, value]) => ({ ...value, key }))\n            .sort((a, b) => a.value < b.value)\n    }\n\n    function drawBarChart() {\n\n        const data = getBarData()\n\n        if (isEmpty(data))\n            return;\n\n        if (barChart) {\n            barChart.annotation().clear(true);\n            // barChart.annotation().text({\n            //     position: ['95%', '10%'],\n            //     content: sum(data.map(d => d.value)) + \" tweets\",\n            //     style: {\n            //         fontSize: 40,\n            //         fontWeight: 'bold',\n            //         fill: '#dadada',\n            //         textAlign: 'end'\n            //     },\n            //     animate: false,\n            // });\n\n            barChart.changeData(data)\n            return;\n        }\n\n        const chart = new Chart({\n            container: 'bar',\n            autoFit: true,\n            height: 300,\n            renderer: 'svg'\n            // padding: [20, 60]\n        });\n        // @ts-ignore\n        chart.data(data);\n        chart.coordinate('rect').transpose();\n        chart.legend(false);\n        chart.tooltip(true);\n        // chart.axis('value', false);\n        // chart.axis('key', {\n        //     animateOption: {\n        //         update: {\n        //             duration: 1000,\n        //             easing: 'easeLinear'\n        //         }\n        //     }\n        // });\n\n        // chart.annotation().text({\n        //     position: ['95%', '10%'],\n        //     content: sum(data.map(d => d.value)) + \" tweets\",\n        //     style: {\n        //         fontSize: 40,\n        //         fontWeight: 'bold',\n        //         fill: '#dadada',\n        //         textAlign: 'end'\n        //     },\n        //     animate: false,\n        // });\n\n        chart\n            .interval()\n            .position('key*value')\n            .color('key', k => {\n                return keyColor.current.filter(c => c[0] === k)[0][1]\n            })\n            .animate({\n                appear: {\n                    duration: 1000,\n                    easing: 'easeLinear'\n                },\n                update: {\n                    duration: 500,\n                    easing: 'easeLinear'\n                }\n            });\n\n        chart.render();\n        setBarChart(chart)\n    }\n\n    function handleBack() {\n        Object.keys(count.current).map(handleRemove)\n\n        onBack()\n    }\n\n    return <div className=\"main-container\">\n        <PageHeader title=\"Tweets monitor\" subTitle=\"Monitore assuntos em tempo real (ou quase isso)\" onBack={handleBack}>\n\n            <div className=\"trends-container\">\n                <TrendsContainer onClick={addSocket} disabled={takenColors.length == 2} />\n            </div>\n\n            <div className=\"tweets-search-container\">\n                <Search\n                    enterButton\n                    disabled={takenColors.length == 2}\n                    placeholder=\"Ou entre seu\"\n                    onSearch={addSocket}\n                    value={search}\n                    onChange={e => setSearch(e.target.value)}\n                    className=\"tweets-search\" />\n                <div className=\"tags-container\">\n                    {takenColors.map(([tag, color]) =>\n                        <Tag\n                            key={tag}\n                            closable={true}\n                            color={color}\n                            onClose={_ => handleRemove(tag)}\n                        >\n                            <p>{tag}</p>\n                        </Tag>\n                    )\n                    }\n                </div>\n            </div>\n        </PageHeader>\n\n        <Card title=\"Métricas\" bordered={false}>\n            <TweetsStatistics statistics={statistics} />\n        </Card>\n\n        <Card title=\"Contagem temporal\" bordered={false}>\n            <div className=\"series-container\">\n                <div id=\"series\"></div>\n            </div>\n        </Card>\n\n\n        <Row gutter={[16, 16]}>\n            <Col span={12}>\n                <Card title=\"Localização\" bordered={false}>\n                    <div className=\"map-container\">\n                        <div id=\"map\"></div>\n                    </div >\n                </Card>\n            </Col>\n\n            <Col span={12}>\n                <Card title=\"Contagem total\" bordered={false}>\n                    <div className=\"bars-container\">\n                        <div id=\"bar\"></div>\n                    </div>\n                </Card>\n\n            </Col>\n        </Row>\n\n        <CountDown\n            className=\"count-down-refresh\"\n            target={targetTime}\n            onEnd={updateAll}\n        />\n\n    </div >\n        ;\n\n}","import axios from 'axios';\nimport { apiURL } from '.';\n\nlet API_URL = apiURL;\n\nconst service = axios.create({ baseURL: API_URL });\nexport default {\n\n    find() {\n        return service.get(\"/historical-tweets\").then(res => res.data)\n    },\n\n    getStaticData() {\n        return axios.get(window.location.href + \"data.json\").then(res => res.data)\n    }\n\n}\n","import React from 'react';\nimport { Input, PageHeader, Row, Col, Card, Checkbox, Select, Icon, Tooltip } from 'antd';\nimport { useRef } from 'react';\nimport crossfilter from 'crossfilter';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { Chart, registerShape, Util } from '@antv/g2';\nimport { isEmpty, max } from 'lodash';\nimport DataSet from '@antv/data-set';\nimport * as d3 from \"d3\";\nimport * as dc from \"dc\";\nimport _ from 'lodash';\nimport { quantileSeq, arg } from \"mathjs\"\n\nimport * as MapController from '../../map/MapController';\nimport './StaticMainContainer.scss';\n\n// import data from './data.json';\nimport TweetsStatistics from '../RealTimeContainer/TweetsStatistics';\nimport TwitterService from '../../services/TwitterService';\n\nconst { Option } = Select\n\nconst maxWords = 50;\nconst wordsColors = [\"#646464\", \"#818181\", \"#a2a2a2\", \"#ffffff\"]\n\nconst formatFunctions = {\n    minutes: d3.timeMinute,\n    seconds: d3.timeSecond,\n    hour: d3.timeHour,\n    day: d3.timeDay,\n    identity: x => x\n}\n\nexport function StaticMainContainer({ onBack }) {\n\n    const [data, setData] = useState();\n    const [offline, setOffline] = useState()\n\n    const [selectedKeys, setSelectedKeys] = useState([])\n    const keyFilter = t => selectedKeys.length === 0 || selectedKeys.includes(t.key)\n\n    const [selectedTypes, setSelectedTypes] = useState([])\n    const typeFilter = t => selectedTypes.length === 0 || selectedTypes.includes(t.type)\n\n    const [dateInterval, setDateInterval] = useState()\n    const dateFilter = t => !dateInterval || (t.date.getTime() >= dateInterval[0] && t.date.getTime() <= dateInterval[1])\n\n    const wordChart = useRef()\n\n    const [barChart, setBarChart] = useState()\n    const [pieChart, setPieChart] = useState()\n\n    const filteredData = (data || [])\n        .filter(keyFilter)\n        .filter(typeFilter)\n        .filter(dateFilter)\n\n    const colors = [\"#3366cc\", \"#dc3912\", \"#ff9900\", \"#109618\", \"#990099\", \"#0099c6\", \"#dd4477\", \"#66aa00\", \"#b82e2e\", \"#316395\", \"#994499\", \"#22aa99\", \"#aaaa11\", \"#6633cc\", \"#e67300\", \"#8b0707\", \"#651067\", \"#329262\", \"#5574a6\", \"#3b3eac\"]\n\n    const [statistics, setStatistics] = useState({});\n    const metrics = useRef({ users: new Set() })\n    const [coloredKeys, setColors] = useState([]);\n\n    const [dateFormater, setDateFormater] = useState(() => formatFunctions.identity)\n    const dateFormatSelect = <Select defaultValue={\"identity\"} onChange={f => setDateFormater(() => formatFunctions[f])}>\n        <Option key={0} value=\"identity\">Momento exato</Option>\n        <Option key={1} value=\"seconds\">Segundos</Option>\n        <Option key={2} value=\"minutes\">Minutos</Option>\n        <Option key={3} value=\"hour\">Hora</Option>\n        <Option key={4} value=\"day\">Dia</Option>\n    </Select>\n\n    const warningTooltip = <Tooltip title=\"AVISO: enquanto o zoom está ativo, outros gráficos não conseguem aplicar seus filtros a este\">\n        <Icon type=\"warning\" />\n    </Tooltip>\n\n    const clearZoomButton = <Tooltip title=\"Remover zoom\">\n\n        <Icon onClick={_ => setDateInterval()} className=\"white-icon\" type=\"zoom-out\" />\n\n    </Tooltip >\n\n\n    const [facts, setFacts] = useState()\n\n    function getTweetType(tweet) {\n        if (tweet.retweet) return \"Retweet\"\n        else if (tweet.reply) return \"Resposta\"\n        else return \"Original\"\n    }\n\n    function processData(data) {\n        data.forEach(d => {\n            d.date = new Date(parseInt(d.date.$numberLong))\n            d.type = getTweetType(d)\n        });\n\n        // data.sort((a, b) => b..$numberLong - a.date)\n        // console.log(data)\n        setData(addColorToData(data))\n    }\n\n    useEffect(() => {\n        /** Backend's Request to get historical tweets*/\n        TwitterService.find().then(data => {\n            setOffline(false)\n            processData(data)\n        })\n            .catch(_ => {\n                setOffline(true)\n                TwitterService.getStaticData().then(processData)\n            })\n    }, [])\n\n\n    useEffect(() => {\n        if (data) init();\n    }, [data])\n\n    useEffect(() => {\n        if (facts) {\n            drawSeriesChart(facts).render()\n        }\n    }, [dateFormater, facts])\n\n    useEffect(() => {\n        if (facts) {\n            if (dateInterval) {\n                const newFacts = crossfilter(data.filter(dateFilter))\n                drawBarChart(newFacts).render()\n                drawSunburst(newFacts).render()\n            }\n            else {\n                const factsData = (data || [])\n                const facts = crossfilter(factsData)\n                // const idDimension = facts.dimension(d => d.id)\n\n\n                // MapController.getMap()\n                //     .on('moveend', e => updateAreaFilter(e, idDimension))\n\n                drawBarChart(facts);\n                drawSeriesChart(facts);\n                // configStats();\n                // addMarkers();\n                // drawWordChart();\n                drawSunburst(facts);\n\n                dc.renderAll()\n\n            }\n        }\n\n    }, [dateInterval, facts])\n\n    useEffect(() => {\n        MapController.clearMarkers()\n        if (!isEmpty(data)) {\n\n            if (barChart)\n                barChart.on('filtered.monitor', (_, type) => {\n                    if (selectedKeys.includes(type))\n                        setSelectedKeys(selectedKeys.filter(k => k !== type))\n                    else setSelectedKeys([...selectedKeys, type])\n                });\n            if (pieChart)\n                pieChart.on('filtered.monitor', (_, type) => {\n                    if (selectedTypes.includes(type))\n                        setSelectedTypes(selectedTypes.filter(k => k !== type))\n                    else setSelectedTypes([...selectedTypes, type])\n                });\n\n            drawWordChart();\n            addMarkers();\n        }\n        // draw()\n    }, [selectedKeys, selectedTypes, dateInterval])\n\n    //** Initializations */\n    function init() {\n        MapController.createMap(\"map\");\n        draw();\n    }\n\n    // function updateAreaFilter(e, idDimension) {\n    //     const visible = new Set()\n\n    //     data.forEach(d => {\n    //         if(!d.position) visible.add\n    //     })\n\n    //     MapController.getMarkersLayer().eachLayer(marker => {\n    //         if (e.target.getBounds().contains(marker.getLatLng()))\n    //             visible.add(marker.id)\n    //     })\n\n    //     console.log(visible)\n\n    //     idDimension.filterFunction(id => visible.has(id))\n    // }\n\n    function draw() {\n        if (data) {\n            const factsData = (data || [])\n            const facts = crossfilter(factsData)\n            setFacts(facts)\n            // const idDimension = facts.dimension(d => d.id)\n\n\n            // MapController.getMap()\n            //     .on('moveend', e => updateAreaFilter(e, idDimension))\n\n            drawBarChart(facts);\n            drawSeriesChart(facts);\n            configStats();\n            addMarkers();\n            drawWordChart();\n            drawSunburst(facts);\n\n            dc.renderAll()\n        }\n\n    }\n\n    /**\n     * \n     * ###########  Draw Charts  ###########\n     * \n    */\n\n    /** Word Cloud */\n    function drawWordChart() {\n\n        const dv = configWorldCloud();\n        if (!dv) return\n        const [min, max] = dv.range('value');\n\n        const colorRange = d3.scaleQuantize()\n\n            .domain(quantileSeq(dv.rows.map(d => d.value), [0, 0.33, 0.66, 1]))\n            .range(wordsColors)\n\n        if (wordChart.current) {\n            wordChart.current.destroy()\n        }\n\n        const chart = new Chart({\n            container: 'word-cloud',\n            autoFit: true,\n            height: 300,\n            padding: 0\n        });\n\n        chart.data(dv.rows);\n        chart.scale({\n            x: { nice: false },\n            y: { nice: false }\n        });\n        chart.legend(false);\n        chart.axis(false);\n        chart.tooltip({\n            showTitle: false,\n            showMarkers: false\n        });\n        chart.coordinate().reflect();\n        chart.point()\n            .position('x*y')\n            .color('value', v => {\n\n                return colorRange(v)\n            })\n            .shape('cloud');\n        chart.render();\n\n        wordChart.current = chart\n    }\n\n    function configWorldCloud() {\n        const wc = getWordCount()\n        if (isEmpty(wc))\n            return\n        const dv = new DataSet.View().source(wc);\n\n        const [min, max] = dv.range('value');\n        dv.transform({\n            spiral: 'rectangular',\n            type: 'tag-cloud',\n            fields: ['key', 'value'],\n            font: 'serif',\n            size: [600, 300],\n            padding: 0,\n            timeInterval: Infinity,\n            rotate() {\n                let random = ~~(Math.random() * 4) % 4;\n                if (random === 2) {\n                    random = 0;\n                }\n                return random * 90; // 0, 90, 270\n            },\n            fontSize(d) {\n                const [minFont, maxFont] = [24, 80]\n                const size = ((d.value - min) / (max - min)) * (maxFont - minFont) + minFont\n                return size;\n            }\n        });\n        return dv;\n    }\n\n    /** Bar Chart */\n    function drawBarChart(facts) {\n        const keyDimension = facts.dimension(d => d.key)\n        const keyCountGroup = keyDimension.group()\n\n        const visibleKeys = keyCountGroup.all().map(d => d.key)\n        const keyScale = d3.scaleOrdinal().domain(visibleKeys)\n\n        const chart = dc.barChart(d3.select(\"#bar\"))\n        chart\n            .width(600)\n            .height(300)\n            .dimension(keyDimension)\n            .xUnits(dc.units.ordinal)\n            .margins({ top: 10, right: 20, bottom: 50, left: 50 })\n            .x(keyScale)\n            .colors(k => coloredKeys[k])\n            .colorAccessor(d => d.key)\n            // .centerBar(true)\n            .gap(50)\n            .renderHorizontalGridLines(true)\n            .group(keyCountGroup)\n            .renderlet(function (chart) {\n                // console.log(chart.selectAll(\"g.x text\").size())\n                chart.selectAll(\"g.x text\")\n                    // .attr('dx', '-30')\n                    // .attr('transform', \"rotate(-45)\");\n                    .text(k => {\n                        const maxChars = 45;\n                        let n = chart.selectAll(\"g.x text\").size()\n                        if (n <= 3) return k\n                        else {\n                            const charsByKey = Math.min(12, maxChars / n)\n                            // console.log(n, maxChars, charsByKey)\n                            if (charsByKey <= 3) return \"...\"\n                            else {\n                                if (k.length <= charsByKey) return k\n                                return k.slice(0, charsByKey - 3) + \"...\"\n                            }\n                        }\n\n\n                    })\n\n            });\n\n        chart.on('filtered.monitor', (_, type) => {\n            if (selectedKeys.includes(type))\n                setSelectedKeys(selectedKeys.filter(k => k !== type))\n            else setSelectedKeys([...selectedKeys, type])\n        });\n\n        chart.xAxis().ticks(4)\n\n        setBarChart(chart)\n        return chart;\n\n    }\n\n    /** Series Chart */\n    function drawSeriesChart(facts) {\n\n        const timeDimension = facts.dimension(d => [d.key, dateFormater(d.date)])\n        const timeCountGroup = timeDimension.group()\n\n        // const rangeTimeDimension = facts.dimension(d => [d.key, dateFormater(d.date)])\n        // const rangeTimeCountGroup = rangeTimeDimension.group()\n\n        const [minDate, maxDate] = d3.extent(data || [], d => dateFormater(d.date))\n\n        const timeScale = d3\n            .scaleTime()\n            .domain([minDate, maxDate])\n\n\n        // const rangeTimeScale = d3\n        //     .scaleTime()\n        //     .domain([d3.min(data || [], d => dateFormater(d.date)), d3.max(data || [], d => dateFormater(d.date))])\n\n        const dateSeriesChart = new dc.SeriesChart(d3.select(\"#series\"));\n        // const rangeChart = new dc.SeriesChart(d3.select(\"#series-range\"));\n\n        dateSeriesChart\n            .width(1200)\n            .height(400)\n            .chart(function (c) { return new dc.LineChart(c); })\n            .x(timeScale)\n            .margins({ top: 80, right: 10, bottom: 40, left: 40 })\n            .brushOn(false)\n            .yAxisLabel(\"Quantidade de Tweets\")\n            .xAxisLabel(\"Horário\")\n            .clipPadding(10)\n            .elasticY(true)\n            .dimension(timeDimension)\n            .group(timeCountGroup)\n            .mouseZoomable(true)\n            .ordering(d => d.key[1])\n\n            // .rangeChart(rangeChart)\n            .seriesAccessor(function (d) { return d.key[0]; })\n            .keyAccessor(function (d) { return d.key[1]; })\n            .valueAccessor(function (d) { return +d.value; })\n            .legend(dc.legend().x(80).y(0).itemHeight(13).autoItemWidth(true).horizontal(1))\n            .colors(k => coloredKeys[k])\n            .colorAccessor(d => d.key[0]);\n\n        dateSeriesChart.on(\"filtered.monitor\", (e, dateInterval) => {\n            if (isEmpty(dateInterval)) setDateInterval()\n            else {\n                if (dateInterval[0].getTime() === minDate.getTime() && dateInterval[1].getTime() === maxDate.getTime())\n                    setDateInterval()\n                else setDateInterval(dateInterval)\n            }\n        })\n\n\n\n        // rangeChart\n        //     .width(1200)\n        //     .height(300)\n        //     .chart(function (c) { return new dc.LineChart(c).curve(d3.curveCardinal) })\n        //     .x(rangeTimeScale)\n        //     .margins({ top: 10, right: 10, bottom: 50, left: 80 })\n        //     .brushOn(true)\n        //     .mouseZoomable(true)\n        //     .yAxisLabel(\"Quantidade de Tweets\")\n        //     .xAxisLabel(\"Horário\")\n        //     .clipPadding(10)\n        //     .elasticY(true)\n        //     .dimension(timeDimension)\n        //     .group(timeCountGroup)\n        //     .seriesAccessor(function (d) { return d.key[0]; })\n        //     .keyAccessor(function (d) { return d.key[1]; })\n        //     .valueAccessor(function (d) { return +d.value; })\n        //     // .legend(dc.legend().x(80).y(284).itemHeight(13).autoItemWidth(true).horizontal(1))\n        //     .colors(k => coloredKeys[k])\n        //     .colorAccessor(d => d.key[0]);\n\n        // rangeChart.xAxis().ticks(4)\n\n\n        return dateSeriesChart\n\n    }\n\n    function drawSunburst(facts) {\n        const typesDimension = facts.dimension(d => d.type)\n        const typesCountGroup = typesDimension.group()\n\n        const colorScale = d3.scaleOrdinal()\n            .domain([\"Resposta\", \"Retweet\", \"Original\"])\n            .range([\"#46EDC8\", \"#374D7C\", \"#FDF289\"])\n\n        var chart = dc.pieChart(d3.select(\"#sunburst\"));\n        chart.width(600)\n            .height(295)\n            .innerRadius(0)\n            .dimension(typesDimension)\n            .group(typesCountGroup)\n            .colors(colorScale)\n            .colorAccessor(d => d.key)\n            .legend(dc.legend())\n\n        chart.on('filtered.monitor', (_, type) => {\n            if (selectedTypes.includes(type))\n                setSelectedTypes(selectedTypes.filter(k => k !== type))\n            else setSelectedTypes([...selectedTypes, type])\n        });\n\n        setPieChart(chart)\n        return chart\n    }\n\n\n    /**\n     * \n     * ###########  Processing Data  ###########\n     * \n    */\n\n    /** Satistics */\n    function configStats() {\n        metrics.current = { users: new Set() }\n\n        data.forEach(tweet => {\n            if (tweet.retweet) metrics.current.retweets = (metrics.current.retweets || 0) + 1\n            else if (tweet.reply) metrics.current.replies = (metrics.current.replies || 0) + 1\n            else metrics.current.original = (metrics.current.original || 0) + 1\n\n            metrics.current.users.add(tweet.userName);\n            if (tweet.position) metrics.current.geolocated = (metrics.current.geolocated || 0) + 1\n            metrics.current.mediasAndLink = (metrics.current.mediasAndLink || 0) + tweet.mediasAndLink\n            metrics.current.mentions = (metrics.current.mentions || 0) + tweet.mentions\n            metrics.current.total = (metrics.current.total || 0) + 1\n        })\n\n        setStatistics({\n            users: metrics.current.users.size,\n            retweets: (metrics.current.retweets || 0),\n            mediaAndLinks: metrics.current.mediasAndLink,\n            total: metrics.current.total,\n            mentions: metrics.current.mentions,\n            geolocated: metrics.current.geolocated,\n            replies: metrics.current.replies,\n            originals: metrics.current.original\n        })\n    }\n\n    /**\n     * \n     * ###########  Auxiliary Functions  ###########\n     * \n    */\n\n    function getTextAttrs(cfg) {\n        return {\n            ...cfg.defaultStyle,\n            ...cfg.style,\n            fontSize: cfg.data.size,\n            text: cfg.data.text,\n            textAlign: 'center',\n            fontFamily: cfg.data.font,\n            fill: cfg.color || cfg.defaultStyle.stroke,\n            textBaseline: 'Alphabetic'\n        };\n    }\n\n    registerShape('point', 'cloud', {\n        draw(cfg, container) {\n            const attrs = getTextAttrs(cfg);\n            const textShape = container.addShape('text', {\n                attrs: {\n                    ...attrs,\n                    x: cfg.x,\n                    y: cfg.y\n                }\n            });\n            if (cfg.data.rotate) {\n                Util.rotate(textShape, cfg.data.rotate * Math.PI / 180);\n            }\n\n            return textShape;\n        }\n    });\n\n\n\n    function addColorToData(data) {\n        const keyColor = {\n            // retweet: \"white\",\n            // reply: \"magenta\",\n            // original: \"black\"\n        }\n        let i = 0\n\n        const newData = data.map(t => {\n            if (keyColor[t.key]) return { ...t, color: keyColor[t.key] }\n            else {\n                if (i > colors.length - 1) return t\n                keyColor[t.key] = colors[i]\n                i += 1\n                return { ...t, color: keyColor[t.key] }\n            }\n        }).filter(t => t.color)\n\n        setColors(keyColor);\n        return newData\n    }\n\n\n    /** Add markers to map */\n    function addMarkers() {\n        filteredData\n            .forEach(function (tweet) {\n                tweet.date = new Date(tweet.date);\n                MapController.addMarker(tweet, _, true);\n            });\n    }\n\n    function getWordCount() {\n        const wc = {}\n\n        filteredData.forEach(({ wordCount }) => {\n            Object.entries(wordCount).map(([word, count]) => wc[word] = count + (wc[word] || 0))\n        })\n\n        const wordCount = Object.entries(wc)\n            .map(([key, value]) => ({ key, value }))\n\n        wordCount.sort((a, b) => b.value - a.value)\n\n        if (wordCount.length <= maxWords) return wordCount\n        else return wordCount.slice(0, maxWords)\n    }\n\n\n    /** Render */\n    return (\n        <div className=\"main-container\">\n            <PageHeader\n                title=\"Tweets Analyzer\"\n                subTitle=\"Análise histórica dos tweets consumidos\"\n                onBack={onBack}\n                backIcon={offline ? false : <Icon type=\"arrow-left\" />}\n            >\n                {/* <CheckboxGroup options={Object.keys(coloredKeys)} value={selectedKeys} onChange={setSelectedKeys} /> */}\n            </PageHeader>\n            <Card title=\"Métricas\" bordered={false}>\n                <TweetsStatistics statistics={statistics} selectable={false} />\n            </Card>\n\n            <br />\n            <Row>\n                <Card title={<>\n                    Contagem temporal {dateInterval && <> {warningTooltip} {clearZoomButton} </>}\n                </>}\n                    bordered={false} extra={dateFormatSelect}>\n                    <div className=\"static-series-container\">\n                        <div id=\"series\"></div>\n\n                        <div id=\"series-range\"></div>\n                    </div>\n                </Card>\n            </Row>\n            <br />\n            <Row gutter={[16, 16]}>\n                <Col span={12}>\n                    <Card title=\"Localização\" bordered={false}>\n                        <div className=\"map-container\">\n                            <div id=\"map\"></div>\n                        </div >\n                    </Card>\n\n\n                </Col>\n                <Col span={12}>\n                    <Card title=\"Contagem total\" bordered={false}>\n                        <div className=\"static-bars-container\">\n                            <div id=\"bar\"></div>\n                        </div>\n                    </Card>\n                </Col>\n            </Row>\n            <br />\n\n            <Row gutter={[16, 16]}>\n                <Col span={12}>\n                    <Card title=\"Contagem por tipo\" bordered={false}>\n                        <div className=\"static-sunburst-container\">\n                            <div id=\"sunburst\"></div>\n                        </div>\n                    </Card>\n                </Col>\n                <Col span={12}>\n                    <Card title=\"Palavras mais utilizadas\" bordered={false}>\n                        <div className=\"word-cloud-container\">\n                            <div id=\"word-cloud\"></div>\n                        </div>\n                    </Card>\n\n\n                </Col>\n\n            </Row>\n            <br />\n\n            <Row>\n\n            </Row>\n        </div>\n    );\n}","import React from 'react'\nimport { Tabs, Drawer, Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport \"./MainContainer.scss\";\nimport RealTimeContainer from './RealTimeContainer/RealTimeContainer';\nimport { useState } from 'react';\nimport { StaticMainContainer } from './Statics/StaticMainContainer';\n\nconst { TabPane } = Tabs;\n\nexport default function MainContainer() {\n\n    const [view, setView] = useState(<StaticMainContainer key={+ new Date()} onBack={() => setVisible(true)} />)\n    const [visible, setVisible] = useState(false)\n\n    function setStaticView() {\n        setVisible(false)\n        setView(<StaticMainContainer key={+ new Date()} onBack={() => setVisible(true)} />)\n    }\n\n    function setRealTimeView() {\n        setVisible(false)\n        setView(<RealTimeContainer key={+ new Date()} onBack={() => setVisible(true)} />)\n    }\n\n    return <>\n        <Drawer\n            title=\"Selecione um painel\"\n            placement=\"left\"\n            visible={visible}\n            onClose={() => setVisible(false)}\n        >\n            <Button type=\"link\" onClick={setStaticView}>Análise histórica</Button>\n            <Button type=\"link\" onClick={setRealTimeView}>Análise em tempo real</Button>\n        </Drawer>\n\n        <div className=\"view-container\">\n            {view}\n        </div>\n    </>;\n}","import React from 'react';\nimport './App.css';\nimport MainContainer from './components/MainContainer';\nimport { StaticMainContainer } from './components/Statics/StaticMainContainer';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      {/* <StaticMainContainer /> */}\n      <MainContainer />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}